class SearchController < ApplicationController
  def search  
	if params[:q].nil?
    		@books = []
  	else		
		if params[:search]
			redirect_to search_url
			puts "inga varuthu"
	    		@books = Book.search params[:q]
		else
	    		@books = Book.search params[:q]		
		end
  	end
  end
  def autocomplete
    puts "in auto complete"
    render json: Book.search(params[:query], autocomplete: false, limit: 10).map do |book|
      { name: book.name, id: book._id }
    puts "books"
    end
  end
end
